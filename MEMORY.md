# MEMORY.md - 长期记忆

## 重要信息记录

### 家庭基本信息
- **记录时间:** 2026-02-10
- **家庭住址:** 上海市杨浦区
- **家庭成员:**
  1. **汪汪 (汪葆春)** - 丈夫，编程工作
  2. **Helen** - 妻子，法国留学签证工作
  3. **儿子** - 11岁，2026年寒假后读四年级下学期
     - **兴趣爱好:** 做手工、养植物动物、玩电子游戏、画画、编程
     - **特点分析:** 兴趣广泛，兼具动手能力、创造力、自然观察力和逻辑思维

### Helen的个人信息
- **兴趣爱好:** 喜欢唱歌
- **喜欢的歌手:** 张碧晨
- **消费习惯:** 喜欢省钱、薅羊毛
- **工作特点:** 法国留学签证相关工作，工作目录在 `/Users/yangyan/Downloads/同步空间/HelenOA`
- **沟通方式:** Slack频道 `D0ADEJGKGF5`

### 系统设置和偏好
- **时区:** Asia/Shanghai
- **主要沟通语言:** 中文
- **互动风格:** 随和、友好
- **已建立的自动化:**
  1. **迪士尼排队监测** - 东京迪士尼乐园，每小时监测前5大项目 (08:00-20:00)，推送给汪汪和Helen两人
  2. **迪士尼每日汇总报告** - 每日21:00发送多天状况一览报告给汪汪
  3. **迪士尼趋势分析报告** - 每日21:30生成工作日/节假日排队趋势图表和建议
  4. **新闻摘要** - 每日08:00自动搜集日本、IT、投资新闻
  5. **Slack连接保持** - 每30分钟检查连接
  6. **张碧晨动态监控** - 每日10:00搜索Helen喜欢的歌手最新动态
  7. **上海优惠信息推送** - 每日15:00搜索本地优惠和省钱机会

### 重要日期和事件
- **2026-02-10:** 用户分享了详细的家庭信息
- **2026-02-10:** 迪士尼排队监测系统设置完成 (监测时段: 08:00-20:00)
- **2026-02-10:** Claude模型测试完成 (Anthropic Claude 3.5 Sonnet)
- **2026-02-10:** 生活助手计划批准实施 (张碧晨动态监控 + 上海优惠信息推送)
- **2026-02-11:** Claude Code开发规则确立 - 开发工具或脚本时优先使用Claude Code
- **2026-02-11:** A股量化分析技能安装 - 安装china-stock-analysis技能并成功使用baostock数据源解决akshare依赖问题
- **2026-02-11:** 搜索API配置完成 - 配置Tavily API并验证搜索功能，解决张碧晨监控、上海优惠信息、新闻推送的搜索需求
- **2026-02-11:** GitHub推送问题解决 - 诊断HTTPS连接问题，切换为SSH协议，确保迪士尼报告正常发布到GitHub Pages
- **2026-02-11:** 定时任务优化 - 根据权限限制调整上海优惠信息只推送给汪汪，避免Slack API的missing_scope错误

### 用户偏好和需求
- **工作方面:** 编程相关任务、自动化设置、技术问题解决
- **生活方面:** 家庭事务、旅行规划、生活助手
- **娱乐方面:** 迪士尼相关信息 (东京迪士尼乐园)
- **沟通偏好:** 直接、实用、避免过度正式
- **信息推送偏好:**
  1. **张碧晨信息:** 关注大麦平台所有相关信息（票务、演出预告等）
  2. **优惠信息:** 关注美团霸王餐所有优惠和杨浦公众号社区活动
  3. **信息格式:** 简洁摘要，只推送确认信息，不推送传闻
  4. **推送时机:** 有重要信息时才推送，日常小动态不推送
  5. **信息质量:** 优先选择有实际价值的信息
- **开发工具规则:**
  1. **首选工具:** 开发工具或脚本时，优先使用Claude Code
  2. **适用场景:** 所有Python脚本、命令行工具、自动化脚本、项目工具开发
  3. **工作流程:** 使用Claude Code CLI，遵循coding-agent技能的工作流程
  4. **执行模式:** 简单任务使用`--print`模式，复杂任务使用background+PTY模式
  5. **技术要点:** 必须在git仓库中运行，使用`pty:true`确保终端正常工作
- **投资分析兴趣:**
  1. **A股量化分析:** 用户对A股行业板块技术分析感兴趣，特别是底部突破识别
  2. **细分行业分析:** 关注申万二级细分行业（如881274影视院线），需要全面覆盖所有细分行业
  3. **多维评估:** 需要技术分析+新闻摘要结合，理解突破背后的基本面驱动
  4. **数据源偏好:** 能接受替代方案（如baostock替代akshare）而非过度调试问题依赖
  5. **实用导向:** 重视实际可用的分析工具而非完美的技术方案
  6. **结构化输出:** 需要按突破强度排序的行业分析报告，推荐排名前3的行业

---

## 重要决策和教训

### 系统配置决策
1. **语音识别方案:** 选择Google Speech Recognition满足当前需求，inference.sh语音识别调试暂缓
2. **AI模型选择:** 配置了DeepSeek和Claude模型，可根据任务需求切换
3. **自动化优先级:** 先满足核心需求，复杂方案可逐步优化
4. **数据源替代策略:** 当主要数据源（如akshare）安装失败时，快速寻找替代方案（如baostock）而非过度调试
5. **技能生态系统:** 优先使用现有技能（如china-stock-analysis）而非从头开发，利用社区资源加快交付
6. **数据源兼容性:** A股数据源存在格式兼容性问题（申万代码881xxx vs. baostock的sh.xxxxxx），需要灵活适配方案
7. **Git协议选择:** 当Git HTTPS推送失败时（HTTP2协议错误、连接超时），应切换到SSH协议。SSH协议更稳定，但需要预先配置SSH密钥和GitHub账户关联
8. **搜索API配置:** Tavily API适合AI优化的搜索任务（新闻、娱乐信息、本地优惠），优先使用现有技能的搜索功能而非从头开发
9. **故障排除流程:** 遇到技术问题（如GitHub推送失败）时，采用系统化诊断：1. 重现问题 2. 网络测试 3. 协议切换 4. 验证解决 5. 报告结果。优先尝试替代方案而非过度调试问题根源。

### 用户互动经验
1. **沟通效率:** 用户偏好直接、高效的沟通方式
2. **反馈响应:** 用户对技术方案会提供具体反馈和要求调整
3. **信息分享:** 用户会主动分享家庭和生活信息以提供更好的帮助
4. **工作流程偏好:** 先配置功能，再手动测试验证，发现问题及时反馈
5. **系统稳定性关注:** 对自动化系统的稳定运行有较高期望，发现问题立即询问
6. **信息控制:** 对推送内容和目标有明确偏好，会根据实际需求调整（如优惠信息只推给汪汪）

---

## 待办事项跟踪

### 长期目标
1. **家庭助手角色:** 探索如何在工作之外为家庭提供有价值的帮助
2. **技能扩展:** 根据用户兴趣逐步添加相关功能
3. **关系建立:** 与汪汪、Helen和儿子建立良好的互动关系

### 近期关注
1. **迪士尼数据积累:** 从2026-02-11开始积累排队时间数据（已有15条记录）
2. **生活助手实施监控:** 明天首次自动执行张碧晨动态(10:00)和优惠信息搜索(15:00)，验证Tavily API配置
3. **GitHub推送稳定性:** 监控SSH协议推送的稳定性，观察是否需长期保持SSH协议
4. **调度器状态监控:** 观察isolated任务的执行状态记录问题
5. **Helen需求响应:** 等待Helen对帮助建议的回复

---

*MEMORY.md 创建于 2026-02-10*
*最后更新: 2026-02-11 (21:00 GMT+8)*